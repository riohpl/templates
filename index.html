<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stepper with Progress Bar</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: #f4f4f4;
      }
      .container {
        width: 400px;
        text-align: center;
      }
      .progress-container {
        position: relative;
        width: 100%;
        height: 4px;
        background: #ccc;
      }
      .progress {
        height: 4px;
        width: 0%;
        background: #4caf50;
        transition: width 0.3s ease;
      }
      .step-marker {
        position: absolute;
        width: 30px;
        height: 30px;
        background: #ccc;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        color: white;
        transform: translate(-50%, -50%);
      }
      .step-marker.active {
        background: #4caf50;
      }
      .step-content {
        margin-top: 20px;
        padding: 20px;
        background: white;
        border-radius: 5px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
      }
      button {
        margin-top: 20px;
        padding: 10px 20px;
        border: none;
        background: #4caf50;
        color: white;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
      }
      button:disabled {
        background: #ccc;
        cursor: not-allowed;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="progress-container">
        <div class="progress"></div>
        <div class="step-marker active" style="left: 0%">1</div>
        <div class="step-marker" style="left: 33%">2</div>
        <div class="step-marker" style="left: 66%">3</div>
        <div class="step-marker" style="left: 100%">4</div>
      </div>
      <div class="step-content" id="stepContent">
        <div class="step" id="step-0">
          <h3>Step 1 Content</h3>
          <input type="checkbox" /> Option 1 <input type="checkbox" /> Option 2
        </div>
        <div class="step" id="step-1" style="display: none">
          <input type="radio" name="radio1" /> Choice A
          <input type="radio" name="radio1" /> Choice B
        </div>
        <div class="step" id="step-2" style="display: none">
          <input type="checkbox" /> Option 3
        </div>
        <div class="step" id="step-3" style="display: none">
          <h3>Step 2 Content</h3>
          <input type="checkbox" /> Option 4
        </div>
        <div class="step" id="step-4" style="display: none">
          <input type="radio" name="radio2" /> Choice C
          <input type="radio" name="radio2" /> Choice D
        </div>
        <div class="step" id="step-5" style="display: none">
          <input type="checkbox" /> Option 5
        </div>
        <div class="step" id="step-6" style="display: none">
          <h3>Step 3 Content</h3>
          <input type="checkbox" /> Option 6
        </div>
        <div class="step" id="step-7" style="display: none">
          <input type="radio" name="radio3" /> Choice E
          <input type="radio" name="radio3" /> Choice F
        </div>
        <div class="step" id="step-8" style="display: none">
          <input type="checkbox" /> Option 7
        </div>
        <div class="step" id="step-9" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-10" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-11" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-12" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-13" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-14" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-15" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-16" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-17" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-18" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-19" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-20" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
        <div class="step" id="step-21" style="display: none">
          <h3>Step 4 Content</h3>
          <input type="checkbox" /> Option 8
        </div>
      </div>
      <button id="backBtn" disabled>Back</button>
      <button id="nextBtn">Next</button>
    </div>

    <script>
      const progress = document.querySelector(".progress");
      const nextBtn = document.getElementById("nextBtn");
      const backBtn = document.getElementById("backBtn");
      const stepMarkers = document.querySelectorAll(".step-marker");
      const steps = document.querySelectorAll(".step");
      const totalSteps = steps.length;
      const mainSteps = [0, 3, 6, 9];
      let currentStep = 0;

      nextBtn.addEventListener("click", () => {
        if (currentStep < totalSteps - 1) {
          steps[currentStep].style.display = "none";
          currentStep++;
          steps[currentStep].style.display = "block";
          progress.style.width = (currentStep / (totalSteps - 1)) * 100 + "%";
          updateMarkers();
        }
        backBtn.disabled = false;
        if (currentStep === totalSteps - 1) {
          nextBtn.disabled = true;
        }
      });

      backBtn.addEventListener("click", () => {
        if (currentStep > 0) {
          steps[currentStep].style.display = "none";
          currentStep--;
          steps[currentStep].style.display = "block";
          progress.style.width = (currentStep / (totalSteps - 1)) * 100 + "%";
          updateMarkers();
        }
        nextBtn.disabled = false;
        if (currentStep === 0) {
          backBtn.disabled = true;
        }
      });

      function updateMarkers() {
        stepMarkers.forEach((marker, index) => {
          console.log()
          if(currentStep ===7){
            marker.classList.add("active");
          }
          // if (
          //   mainSteps.includes(currentStep) &&
          //   mainSteps.indexOf(currentStep) === index
          // ) {
          //   console.log("ACTIVE", marker, currentStep, index);
          //   // marker.classList.add("active");
          // } else {
          //   console.log("NOT ACTIVE", marker, currentStep, index);
          //   marker.classList.remove("active");
          // }
        });
      }
    </script>
  </body>
</html>
